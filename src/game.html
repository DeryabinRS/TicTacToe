---
layoud: default
title: TikTakToe - game
---

<div class="container">
	<div id="msg"></div>
	<div id="setting"></div>
	<div id="timer"></div>
	<div id="app" class="pt-2"></div>
</div>



<script src="js/app.min.js"></script>
<script>
window.addEventListener("DOMContentLoaded", () => {

	const user = new User();

	const app = document.querySelector('#app');
	const msgBlock = document.querySelector('#msg');
	//SET SETTINGS
	const userLs = JSON.parse(localStorage.getItem('user'));
	const settingPlace = document.querySelector('#setting');
	const game = new TikTacToe('#app', settingPlace);

	if(userLs){
		const selectPlace = game.createSelectPlace(changePlaceSize);
		const selectPlayer = game.createSelectPlayer(changePlayer);
		const btnStartGame = game.createBtns("startgame", "Start Game", ["btn", "btn-success", "mt-2"], startGame, settingPlace);
	}else{
		user.createMsgBox(msgBlock, ['alert', 'alert-danger', 'mt-2'], 'You are not registred. <a href="/">Registration -></a>');
	}	

	function startGame(e) {
		if(e){
			e.target.remove()
			selectPlace.remove();
			selectPlayer.remove();
		}
		game.createBtns("pausegame","Pause",["btn", "btn-info", "me-2", "mt-2"], pauseGame,	settingPlace);
		game.createBtns("exitgame","Exit Game",["btn", "btn-danger", "me-2", "mt-2"], exitGame, settingPlace);
		game.createBtns("refreshgame", "Refresh Game",["btn", "btn-success", "me-2", "mt-2", "visually-hidden"], refreshGame, settingPlace);
		game.startGame();
	}

	function refreshGame(e) {
		document.querySelector('#exitgame').remove();
		e.target.remove();
		app.innerHTML = '';
		startGame();
	}

	function changePlayer(e) {
		game.selectPlayer(e.target.dataset.player);
	}

	function changePlaceSize(e) {
		game.selectPlaceSize(e.target.value);
	}

	function pauseGame(e){
		e.preventDefault();
		const btn = e.target;
		game.pauseGame(btn);
	}

	function exitGame(){
		game.exitGame();
	}

});
</script>
